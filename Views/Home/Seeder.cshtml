<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

    const firebaseConfig = { 
        apiKey: "AIzaSyDrkRtgGhFWSvEiDr5pZy2sGDHI8HCpPt0",
        authDomain: "cramrades.firebaseapp.com",
        projectId: "cramrades",
        storageBucket: "cramrades.firebasestorage.app",
        messagingSenderId: "421414498264",
        appId: "1:421414498264:web:58e04c186d5bdea7c88cad"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Data Pools
    const names = ["Alice", "Bob", "Charlie", "Diana", "Ethan", "Fiona", "George", "Hannah", "Ian", "Jenny"];
    const subjects = ["Math", "Programming", "Science", "History"];
    const levels = ["Beginner", "Intermediate", "Advanced"];
    const years = ["1st Year", "2nd Year", "3rd Year", "4th Year"];
    const days = ["Mon", "Tue", "Wed", "Thu", "Fri"];
    const vibes = ["Quiet", "Coffee", "Group"];
    const genders = ["Male", "Female"];
    
    // All 17 Regions of the Philippines
    const regions = [
        "Region I", "Region II", "Region III", "NCR", "CAR", 
        "Region IV-A", "MIMAROPA", "Region V", "Region VI", 
        "Region VII", "Region VIII", "Region IX", "Region X", 
        "Region XI", "Region XII", "Region XIII", "BARMM"
    ];

    window.generateData = async () => {
        for (let i = 0; i < 10; i++) {
            const randSubj = subjects[Math.floor(Math.random() * subjects.length)];
            const randLevel = levels[Math.floor(Math.random() * levels.length)];
            const randYear = years[Math.floor(Math.random() * years.length)];
            const randVibe = vibes[Math.floor(Math.random() * vibes.length)];
            const randGender = genders[Math.floor(Math.random() * genders.length)];
            const randRegion = regions[Math.floor(Math.random() * regions.length)];
            
            const randDays = days.filter(() => Math.random() > 0.5); 
            if(randDays.length === 0) randDays.push("Mon");

            await addDoc(collection(db, "users"), {
                name: names[i],
                uid: "dummy_" + i,
                program: "BSIT",
                yearLevel: randYear,
                location: randRegion,       // Matches regional logic
                gender: randGender,         // Matches preference logic
                preference: "Everyone",     // Dummy users usually see everyone
                studyVibe: randVibe,        // For the Bumble-style tags
                bio: `Hi! I'm ${names[i]} and I'm looking for a study buddy in ${randRegion}.`,
                partnerPrompt: "Someone who can help me with " + randSubj,
                availability: randDays, 
                skills: [{ subject: randSubj, level: randLevel }],
                createdAt: new Date()
            });
        }
        alert("✅ 10 Regional Dummy Users Added!");
    }
</script>